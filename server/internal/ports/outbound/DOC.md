<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# outbound

```go
import "github.com/Epitech-2nd-Year-Projects/AREA/server/internal/ports/outbound"
```

## Index

- [Variables](<#variables>)
- [type ActionEventRepository](<#ActionEventRepository>)
- [type ActionSourceRepository](<#ActionSourceRepository>)
- [type AreaRepository](<#AreaRepository>)
- [type ComponentListOptions](<#ComponentListOptions>)
- [type ComponentRepository](<#ComponentRepository>)
- [type DeliveryLogRepository](<#DeliveryLogRepository>)
- [type ExecutionRepository](<#ExecutionRepository>)
- [type JobDetails](<#JobDetails>)
- [type JobListOptions](<#JobListOptions>)
- [type JobRepository](<#JobRepository>)
- [type Mail](<#Mail>)
- [type Mailer](<#Mailer>)
- [type ReactionExecutor](<#ReactionExecutor>)
- [type ReactionResult](<#ReactionResult>)
- [type ServiceProviderRepository](<#ServiceProviderRepository>)
- [type SessionRepository](<#SessionRepository>)
- [type SubscriptionRepository](<#SubscriptionRepository>)
- [type TriggerRepository](<#TriggerRepository>)
- [type UserRepository](<#UserRepository>)
- [type VerificationTokenRepository](<#VerificationTokenRepository>)


## Variables

<a name="ErrNotFound"></a>

```go
var (
    // ErrNotFound indicates that the requested record does not exist
    ErrNotFound = errors.New("outbound: not found")

    // ErrConflict signals that the requested operation violates a unique constraint
    ErrConflict = errors.New("outbound: conflict")
)
```

<a name="ActionEventRepository"></a>
## type [ActionEventRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/action_event.go#L10-L12>)

ActionEventRepository persists action events produced by action sources

```go
type ActionEventRepository interface {
    Create(ctx context.Context, event actiondomain.Event) (actiondomain.Event, error)
}
```

<a name="ActionSourceRepository"></a>
## type [ActionSourceRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/action_source.go#L12-L23>)

ActionSourceRepository persists action sources supporting scheduled triggers

```go
type ActionSourceRepository interface {
    UpsertScheduleSource(ctx context.Context, componentConfigID uuid.UUID, schedule string, cursor map[string]any) (actiondomain.Source, error)
    UpsertPollingSource(ctx context.Context, componentConfigID uuid.UUID, cursor map[string]any) (actiondomain.Source, error)
    UpsertWebhookSource(ctx context.Context, componentConfigID uuid.UUID, secret string, urlPath string, cursor map[string]any) (actiondomain.Source, error)
    ListDueScheduleSources(ctx context.Context, before time.Time, limit int) ([]actiondomain.ScheduleBinding, error)
    ListDuePollingSources(ctx context.Context, before time.Time, limit int) ([]actiondomain.PollingBinding, error)
    FindWebhookBindingByPath(ctx context.Context, path string) (actiondomain.WebhookBinding, error)
    UpdateScheduleCursor(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map[string]any) error
    UpdatePollingCursor(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map[string]any) error
    UpdateWebhookCursor(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map[string]any) error
    FindByComponentConfig(ctx context.Context, componentConfigID uuid.UUID) (actiondomain.Source, error)
}
```

<a name="AreaRepository"></a>
## type [AreaRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/area.go#L12-L19>)

AreaRepository persists AREA automations for a user

```go
type AreaRepository interface {
    Create(ctx context.Context, area areadomain.Area, action areadomain.Link, reactions []areadomain.Link) (areadomain.Area, error)
    FindByID(ctx context.Context, id uuid.UUID) (areadomain.Area, error)
    ListByUser(ctx context.Context, userID uuid.UUID) ([]areadomain.Area, error)
    Delete(ctx context.Context, id uuid.UUID) error
    UpdateMetadata(ctx context.Context, area areadomain.Area) error
    UpdateConfig(ctx context.Context, config componentdomain.Config) error
}
```

<a name="ComponentListOptions"></a>
## type [ComponentListOptions](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/component.go#L18-L21>)

ComponentListOptions filters component catalog listings

```go
type ComponentListOptions struct {
    Kind     *componentdomain.Kind
    Provider string
}
```

<a name="ComponentRepository"></a>
## type [ComponentRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/component.go#L11-L15>)

ComponentRepository exposes catalog lookups for service components

```go
type ComponentRepository interface {
    FindByID(ctx context.Context, id uuid.UUID) (componentdomain.Component, error)
    FindByIDs(ctx context.Context, ids []uuid.UUID) (map[uuid.UUID]componentdomain.Component, error)
    List(ctx context.Context, opts ComponentListOptions) ([]componentdomain.Component, error)
}
```

<a name="DeliveryLogRepository"></a>
## type [DeliveryLogRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/delivery_log.go#L11-L14>)

DeliveryLogRepository persists HTTP delivery traces for executed jobs

```go
type DeliveryLogRepository interface {
    Create(ctx context.Context, log jobdomain.DeliveryLog) (jobdomain.DeliveryLog, error)
    ListByJob(ctx context.Context, jobID uuid.UUID, limit int) ([]jobdomain.DeliveryLog, error)
}
```

<a name="ExecutionRepository"></a>
## type [ExecutionRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/execution.go#L11-L13>)

ExecutionRepository persists action events, triggers, and jobs in a single transaction

```go
type ExecutionRepository interface {
    Create(ctx context.Context, event actiondomain.Event, triggers []actiondomain.Trigger, jobs []jobdomain.Job) (actiondomain.Event, []actiondomain.Trigger, []jobdomain.Job, error)
}
```

<a name="JobDetails"></a>
## type [JobDetails](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/job.go#L30-L36>)

JobDetails aggregates job metadata with area/reaction context

```go
type JobDetails struct {
    Job           jobdomain.Job
    AreaID        uuid.UUID
    AreaName      string
    ComponentName string
    ProviderName  string
}
```

<a name="JobListOptions"></a>
## type [JobListOptions](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/job.go#L22-L27>)

JobListOptions filters monitoring job listings

```go
type JobListOptions struct {
    UserID uuid.UUID
    AreaID uuid.UUID
    Status *jobdomain.Status
    Limit  int
}
```

<a name="JobRepository"></a>
## type [JobRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/job.go#L12-L19>)

JobRepository persists reaction jobs derived from triggers

```go
type JobRepository interface {
    Create(ctx context.Context, job jobdomain.Job) (jobdomain.Job, error)
    CreateBatch(ctx context.Context, jobs []jobdomain.Job) ([]jobdomain.Job, error)
    Update(ctx context.Context, job jobdomain.Job) error
    Claim(ctx context.Context, id uuid.UUID, worker string, now time.Time) (jobdomain.Job, error)
    ListWithDetails(ctx context.Context, opts JobListOptions) ([]JobDetails, error)
    FindDetails(ctx context.Context, userID uuid.UUID, jobID uuid.UUID) (JobDetails, error)
}
```

<a name="Mail"></a>
## type [Mail](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/auth.go#L45-L50>)

Mail represents an outbound email payload Implementations may augment this structure with provider\-specific metadata

```go
type Mail struct {
    To      string
    Subject string
    HTML    string
    Text    string
}
```

<a name="Mailer"></a>
## type [Mailer](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/auth.go#L39-L41>)

Mailer delivers transactional email notifications

```go
type Mailer interface {
    Send(ctx context.Context, msg Mail) error
}
```

<a name="ReactionExecutor"></a>
## type [ReactionExecutor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/reaction.go#L20-L22>)

ReactionExecutor executes a reaction link for a given area

```go
type ReactionExecutor interface {
    ExecuteReaction(ctx context.Context, area areadomain.Area, link areadomain.Link) (ReactionResult, error)
}
```

<a name="ReactionResult"></a>
## type [ReactionResult](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/reaction.go#L11-L17>)

ReactionResult captures the outcome of executing a reaction

```go
type ReactionResult struct {
    Endpoint   string
    Request    map[string]any
    Response   map[string]any
    StatusCode *int
    Duration   time.Duration
}
```

<a name="ServiceProviderRepository"></a>
## type [ServiceProviderRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/service_provider.go#L11-L15>)

ServiceProviderRepository exposes lookups for service providers present in the catalog.

```go
type ServiceProviderRepository interface {
    FindByName(ctx context.Context, name string) (servicedomain.Provider, error)
    FindByID(ctx context.Context, id uuid.UUID) (servicedomain.Provider, error)
    List(ctx context.Context) ([]servicedomain.Provider, error)
}
```

<a name="SessionRepository"></a>
## type [SessionRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/auth.go#L22-L27>)

SessionRepository manages browser session entities

```go
type SessionRepository interface {
    Create(ctx context.Context, session sessiondomain.Session) (sessiondomain.Session, error)
    FindByID(ctx context.Context, id uuid.UUID) (sessiondomain.Session, error)
    Delete(ctx context.Context, id uuid.UUID) error
    DeleteByUser(ctx context.Context, userID uuid.UUID) error
}
```

<a name="SubscriptionRepository"></a>
## type [SubscriptionRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/subscription.go#L11-L16>)

SubscriptionRepository persists user\-service subscription relationships.

```go
type SubscriptionRepository interface {
    Create(ctx context.Context, subscription subscriptiondomain.Subscription) (subscriptiondomain.Subscription, error)
    Update(ctx context.Context, subscription subscriptiondomain.Subscription) error
    FindByUserAndProvider(ctx context.Context, userID uuid.UUID, providerID uuid.UUID) (subscriptiondomain.Subscription, error)
    ListByUser(ctx context.Context, userID uuid.UUID) ([]subscriptiondomain.Subscription, error)
}
```

<a name="TriggerRepository"></a>
## type [TriggerRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/trigger.go#L10-L13>)

TriggerRepository persists trigger rows derived from action events

```go
type TriggerRepository interface {
    Create(ctx context.Context, trigger actiondomain.Trigger) (actiondomain.Trigger, error)
    CreateBatch(ctx context.Context, triggers []actiondomain.Trigger) ([]actiondomain.Trigger, error)
}
```

<a name="UserRepository"></a>
## type [UserRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/auth.go#L14-L19>)

UserRepository persists user aggregates Implementations must enforce case\-insensitive uniqueness on email addresses

```go
type UserRepository interface {
    Create(ctx context.Context, user userdomain.User) (userdomain.User, error)
    FindByEmail(ctx context.Context, email string) (userdomain.User, error)
    FindByID(ctx context.Context, id uuid.UUID) (userdomain.User, error)
    Update(ctx context.Context, user userdomain.User) error
}
```

<a name="VerificationTokenRepository"></a>
## type [VerificationTokenRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/ports/outbound/auth.go#L31-L36>)

VerificationTokenRepository stores email verification tokens Tokens are single\-use and should be removed or marked consumed when used

```go
type VerificationTokenRepository interface {
    Create(ctx context.Context, token authdomain.VerificationToken) (authdomain.VerificationToken, error)
    FindByToken(ctx context.Context, token string) (authdomain.VerificationToken, error)
    MarkConsumed(ctx context.Context, tokenID uuid.UUID, consumedAt int64) error
    DeleteByUser(ctx context.Context, userID uuid.UUID) error
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
