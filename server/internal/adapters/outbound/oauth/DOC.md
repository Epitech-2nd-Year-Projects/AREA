<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# oauth

```go
import "github.com/Epitech-2nd-Year-Projects/AREA/server/internal/adapters/outbound/oauth"
```

## Index

- [func NewProvider\(name string, descriptor ProviderDescriptor, creds ProviderCredentials, opts ...ProviderOption\) \(identityport.Provider, error\)](<#NewProvider>)
- [type Manager](<#Manager>)
  - [func NewManager\(registry Registry, cfg ManagerConfig, opts ...ProviderOption\) \(\*Manager, error\)](<#NewManager>)
  - [func \(m \*Manager\) Names\(\) \[\]string](<#Manager.Names>)
  - [func \(m \*Manager\) Provider\(name string\) \(identityport.Provider, bool\)](<#Manager.Provider>)
- [type ManagerConfig](<#ManagerConfig>)
- [type ProfileExtractor](<#ProfileExtractor>)
- [type ProviderCredentials](<#ProviderCredentials>)
- [type ProviderDescriptor](<#ProviderDescriptor>)
- [type ProviderOption](<#ProviderOption>)
  - [func WithProviderClock\(clock oauth2.Clock\) ProviderOption](<#WithProviderClock>)
  - [func WithProviderHTTPClient\(client oauth2.HTTPClient\) ProviderOption](<#WithProviderHTTPClient>)
  - [func WithProviderUserAgent\(agent string\) ProviderOption](<#WithProviderUserAgent>)
- [type Registry](<#Registry>)
  - [func BuiltIn\(\) Registry](<#BuiltIn>)


<a name="NewProvider"></a>
## func [NewProvider](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L79>)

```go
func NewProvider(name string, descriptor ProviderDescriptor, creds ProviderCredentials, opts ...ProviderOption) (identityport.Provider, error)
```

NewProvider builds an OAuth provider implementation from its descriptor and credentials

<a name="Manager"></a>
## type [Manager](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L206-L208>)

Manager exposes resolved providers keyed by name

```go
type Manager struct {
    // contains filtered or unexported fields
}
```

<a name="NewManager"></a>
### func [NewManager](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L163>)

```go
func NewManager(registry Registry, cfg ManagerConfig, opts ...ProviderOption) (*Manager, error)
```

NewManager constructs providers according to configuration and registry definitions

<a name="Manager.Names"></a>
### func \(\*Manager\) [Names](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L220>)

```go
func (m *Manager) Names() []string
```

Names lists the registered provider identifiers

<a name="Manager.Provider"></a>
### func \(\*Manager\) [Provider](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L211>)

```go
func (m *Manager) Provider(name string) (identityport.Provider, bool)
```

Provider returns the provider implementation for the requested name

<a name="ManagerConfig"></a>
## type [ManagerConfig](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L26-L29>)

ManagerConfig configures the OAuth provider manager Allowed restricts the providers that should be instantiated; when empty all configured providers are used

```go
type ManagerConfig struct {
    Allowed   []string
    Providers map[string]ProviderCredentials
}
```

<a name="ProfileExtractor"></a>
## type [ProfileExtractor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/descriptor.go#L14>)

ProfileExtractor converts raw user info responses into identity profiles Implementations should return an error when the payload misses required fields

```go
type ProfileExtractor func(raw map[string]any) (identitydomain.Profile, error)
```

<a name="ProviderCredentials"></a>
## type [ProviderCredentials](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L17-L22>)

ProviderCredentials wires runtime secrets and redirect metadata for a provider

```go
type ProviderCredentials struct {
    ClientID     string
    ClientSecret string
    RedirectURI  string
    Scopes       []string
}
```

<a name="ProviderDescriptor"></a>
## type [ProviderDescriptor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/descriptor.go#L18-L34>)

ProviderDescriptor captures immutable OAuth provider characteristics These values typically originate from the provider documentation

```go
type ProviderDescriptor struct {
    DisplayName         string
    AuthorizationURL    string
    TokenURL            string
    UserInfoURL         string
    UserInfoMethod      string
    UserInfoBody        string
    DefaultScopes       []string
    DefaultPrompt       string
    Audience            string
    AuthorizationParams map[string]string
    UserInfoHeaders     map[string]string
    ProfileExtractor    ProfileExtractor
    TokenAuthMethod     string
    TokenFormat         string
    TokenHeaders        map[string]string
}
```

<a name="ProviderOption"></a>
## type [ProviderOption](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L48>)

ProviderOption configures a provider instance before use

```go
type ProviderOption func(*providerConfig)
```

<a name="WithProviderClock"></a>
### func [WithProviderClock](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L61>)

```go
func WithProviderClock(clock oauth2.Clock) ProviderOption
```

WithProviderClock injects a custom clock into the oauth client

<a name="WithProviderHTTPClient"></a>
### func [WithProviderHTTPClient](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L51>)

```go
func WithProviderHTTPClient(client oauth2.HTTPClient) ProviderOption
```

WithProviderHTTPClient reuses the provided http client for token and user info requests

<a name="WithProviderUserAgent"></a>
### func [WithProviderUserAgent](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/provider.go#L70>)

```go
func WithProviderUserAgent(agent string) ProviderOption
```

WithProviderUserAgent overrides the default user agent header for user info requests

<a name="Registry"></a>
## type [Registry](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/descriptor.go#L38>)

Registry enumerates the descriptors known to the application Keys are normalized provider identifiers \(lowercase\)

```go
type Registry map[string]ProviderDescriptor
```

<a name="BuiltIn"></a>
### func [BuiltIn](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/oauth/descriptor.go#L41>)

```go
func BuiltIn() Registry
```

BuiltIn returns the descriptors for the core providers supported by AREA

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
