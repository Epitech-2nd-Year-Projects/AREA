<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# execution

```go
import "github.com/Epitech-2nd-Year-Projects/AREA/server/internal/adapters/outbound/postgres/execution"
```

## Index

- [type DeliveryLogRepository](<#DeliveryLogRepository>)
  - [func NewDeliveryLogRepository\(db \*gorm.DB\) DeliveryLogRepository](<#NewDeliveryLogRepository>)
  - [func \(r DeliveryLogRepository\) Create\(ctx context.Context, log jobdomain.DeliveryLog\) \(jobdomain.DeliveryLog, error\)](<#DeliveryLogRepository.Create>)
  - [func \(r DeliveryLogRepository\) ListByJob\(ctx context.Context, jobID uuid.UUID, limit int\) \(\[\]jobdomain.DeliveryLog, error\)](<#DeliveryLogRepository.ListByJob>)
- [type EventRepository](<#EventRepository>)
  - [func NewEventRepository\(db \*gorm.DB\) EventRepository](<#NewEventRepository>)
  - [func \(r EventRepository\) Create\(ctx context.Context, event actiondomain.Event\) \(actiondomain.Event, error\)](<#EventRepository.Create>)
- [type JobRepository](<#JobRepository>)
  - [func NewJobRepository\(db \*gorm.DB\) JobRepository](<#NewJobRepository>)
  - [func \(r JobRepository\) Claim\(ctx context.Context, id uuid.UUID, worker string, now time.Time\) \(jobdomain.Job, error\)](<#JobRepository.Claim>)
  - [func \(r JobRepository\) Create\(ctx context.Context, job jobdomain.Job\) \(jobdomain.Job, error\)](<#JobRepository.Create>)
  - [func \(r JobRepository\) CreateBatch\(ctx context.Context, jobs \[\]jobdomain.Job\) \(\[\]jobdomain.Job, error\)](<#JobRepository.CreateBatch>)
  - [func \(r JobRepository\) FindDetails\(ctx context.Context, userID uuid.UUID, jobID uuid.UUID\) \(outbound.JobDetails, error\)](<#JobRepository.FindDetails>)
  - [func \(r JobRepository\) ListWithDetails\(ctx context.Context, opts outbound.JobListOptions\) \(\[\]outbound.JobDetails, error\)](<#JobRepository.ListWithDetails>)
  - [func \(r JobRepository\) Update\(ctx context.Context, job jobdomain.Job\) error](<#JobRepository.Update>)
- [type Manager](<#Manager>)
  - [func NewManager\(db \*gorm.DB\) Manager](<#NewManager>)
  - [func \(m Manager\) Create\(ctx context.Context, event actiondomain.Event, triggers \[\]actiondomain.Trigger, jobs \[\]jobdomain.Job\) \(actiondomain.Event, \[\]actiondomain.Trigger, \[\]jobdomain.Job, error\)](<#Manager.Create>)
- [type TriggerRepository](<#TriggerRepository>)
  - [func NewTriggerRepository\(db \*gorm.DB\) TriggerRepository](<#NewTriggerRepository>)
  - [func \(r TriggerRepository\) Create\(ctx context.Context, trigger actiondomain.Trigger\) \(actiondomain.Trigger, error\)](<#TriggerRepository.Create>)
  - [func \(r TriggerRepository\) CreateBatch\(ctx context.Context, triggers \[\]actiondomain.Trigger\) \(\[\]actiondomain.Trigger, error\)](<#TriggerRepository.CreateBatch>)


<a name="DeliveryLogRepository"></a>
## type [DeliveryLogRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L423-L425>)

DeliveryLogRepository persists delivery logs using Postgres

```go
type DeliveryLogRepository struct {
    // contains filtered or unexported fields
}
```

<a name="NewDeliveryLogRepository"></a>
### func [NewDeliveryLogRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L428>)

```go
func NewDeliveryLogRepository(db *gorm.DB) DeliveryLogRepository
```

NewDeliveryLogRepository constructs a DeliveryLogRepository backed by GORM

<a name="DeliveryLogRepository.Create"></a>
### func \(DeliveryLogRepository\) [Create](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L433>)

```go
func (r DeliveryLogRepository) Create(ctx context.Context, log jobdomain.DeliveryLog) (jobdomain.DeliveryLog, error)
```

Create stores a delivery log row

<a name="DeliveryLogRepository.ListByJob"></a>
### func \(DeliveryLogRepository\) [ListByJob](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L456>)

```go
func (r DeliveryLogRepository) ListByJob(ctx context.Context, jobID uuid.UUID, limit int) ([]jobdomain.DeliveryLog, error)
```

ListByJob returns recent delivery logs for the specified job

<a name="EventRepository"></a>
## type [EventRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L19-L21>)

EventRepository persists action events using Postgres

```go
type EventRepository struct {
    // contains filtered or unexported fields
}
```

<a name="NewEventRepository"></a>
### func [NewEventRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L24>)

```go
func NewEventRepository(db *gorm.DB) EventRepository
```

NewEventRepository constructs an EventRepository backed by GORM

<a name="EventRepository.Create"></a>
### func \(EventRepository\) [Create](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L29>)

```go
func (r EventRepository) Create(ctx context.Context, event actiondomain.Event) (actiondomain.Event, error)
```

Create stores a new action event

<a name="JobRepository"></a>
## type [JobRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L151-L153>)

JobRepository persists jobs using Postgres

```go
type JobRepository struct {
    // contains filtered or unexported fields
}
```

<a name="NewJobRepository"></a>
### func [NewJobRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L156>)

```go
func NewJobRepository(db *gorm.DB) JobRepository
```

NewJobRepository constructs a JobRepository backed by GORM

<a name="JobRepository.Claim"></a>
### func \(JobRepository\) [Claim](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L275>)

```go
func (r JobRepository) Claim(ctx context.Context, id uuid.UUID, worker string, now time.Time) (jobdomain.Job, error)
```

Claim transitions a queued job into the running state for the specified worker

<a name="JobRepository.Create"></a>
### func \(JobRepository\) [Create](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L161>)

```go
func (r JobRepository) Create(ctx context.Context, job jobdomain.Job) (jobdomain.Job, error)
```

Create stores a single job row

<a name="JobRepository.CreateBatch"></a>
### func \(JobRepository\) [CreateBatch](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L194>)

```go
func (r JobRepository) CreateBatch(ctx context.Context, jobs []jobdomain.Job) ([]jobdomain.Job, error)
```

CreateBatch stores multiple jobs in a single statement

<a name="JobRepository.FindDetails"></a>
### func \(JobRepository\) [FindDetails](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L380>)

```go
func (r JobRepository) FindDetails(ctx context.Context, userID uuid.UUID, jobID uuid.UUID) (outbound.JobDetails, error)
```

FindDetails fetches a single job with area metadata ensuring ownership

<a name="JobRepository.ListWithDetails"></a>
### func \(JobRepository\) [ListWithDetails](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L322>)

```go
func (r JobRepository) ListWithDetails(ctx context.Context, opts outbound.JobListOptions) ([]outbound.JobDetails, error)
```

ListWithDetails returns recent jobs enriched with area and component metadata

<a name="JobRepository.Update"></a>
### func \(JobRepository\) [Update](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L239>)

```go
func (r JobRepository) Update(ctx context.Context, job jobdomain.Job) error
```

Update persists mutable fields on a job record

<a name="Manager"></a>
## type [Manager](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L491-L493>)

Manager orchestrates transactional persistence of events, triggers, and jobs

```go
type Manager struct {
    // contains filtered or unexported fields
}
```

<a name="NewManager"></a>
### func [NewManager](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L496>)

```go
func NewManager(db *gorm.DB) Manager
```

NewManager constructs a Manager backed by GORM

<a name="Manager.Create"></a>
### func \(Manager\) [Create](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L501>)

```go
func (m Manager) Create(ctx context.Context, event actiondomain.Event, triggers []actiondomain.Trigger, jobs []jobdomain.Job) (actiondomain.Event, []actiondomain.Trigger, []jobdomain.Job, error)
```

Create persists the event, triggers, and jobs in a single transaction

<a name="TriggerRepository"></a>
## type [TriggerRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L69-L71>)

TriggerRepository persists triggers using Postgres

```go
type TriggerRepository struct {
    // contains filtered or unexported fields
}
```

<a name="NewTriggerRepository"></a>
### func [NewTriggerRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L74>)

```go
func NewTriggerRepository(db *gorm.DB) TriggerRepository
```

NewTriggerRepository constructs a TriggerRepository backed by GORM

<a name="TriggerRepository.Create"></a>
### func \(TriggerRepository\) [Create](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L79>)

```go
func (r TriggerRepository) Create(ctx context.Context, trigger actiondomain.Trigger) (actiondomain.Trigger, error)
```

Create stores a single trigger row

<a name="TriggerRepository.CreateBatch"></a>
### func \(TriggerRepository\) [CreateBatch](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/execution/repositories.go#L109>)

```go
func (r TriggerRepository) CreateBatch(ctx context.Context, triggers []actiondomain.Trigger) ([]actiondomain.Trigger, error)
```

CreateBatch stores multiple triggers in one statement

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
