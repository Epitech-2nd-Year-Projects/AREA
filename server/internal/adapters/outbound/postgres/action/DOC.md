<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# action

```go
import "github.com/Epitech-2nd-Year-Projects/AREA/server/internal/adapters/outbound/postgres/action"
```

## Index

- [type Repository](<#Repository>)
  - [func NewRepository\(db \*gorm.DB\) Repository](<#NewRepository>)
  - [func \(r Repository\) FindByComponentConfig\(ctx context.Context, componentConfigID uuid.UUID\) \(actiondomain.Source, error\)](<#Repository.FindByComponentConfig>)
  - [func \(r Repository\) FindWebhookBindingByPath\(ctx context.Context, path string\) \(actiondomain.WebhookBinding, error\)](<#Repository.FindWebhookBindingByPath>)
  - [func \(r Repository\) ListDuePollingSources\(ctx context.Context, before time.Time, limit int\) \(\[\]actiondomain.PollingBinding, error\)](<#Repository.ListDuePollingSources>)
  - [func \(r Repository\) ListDueScheduleSources\(ctx context.Context, before time.Time, limit int\) \(\[\]actiondomain.ScheduleBinding, error\)](<#Repository.ListDueScheduleSources>)
  - [func \(r Repository\) UpdatePollingCursor\(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map\[string\]any\) error](<#Repository.UpdatePollingCursor>)
  - [func \(r Repository\) UpdateScheduleCursor\(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map\[string\]any\) error](<#Repository.UpdateScheduleCursor>)
  - [func \(r Repository\) UpdateWebhookCursor\(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map\[string\]any\) error](<#Repository.UpdateWebhookCursor>)
  - [func \(r Repository\) UpsertPollingSource\(ctx context.Context, componentConfigID uuid.UUID, cursor map\[string\]any\) \(actiondomain.Source, error\)](<#Repository.UpsertPollingSource>)
  - [func \(r Repository\) UpsertScheduleSource\(ctx context.Context, componentConfigID uuid.UUID, schedule string, cursor map\[string\]any\) \(actiondomain.Source, error\)](<#Repository.UpsertScheduleSource>)
  - [func \(r Repository\) UpsertWebhookSource\(ctx context.Context, componentConfigID uuid.UUID, secret string, urlPath string, cursor map\[string\]any\) \(actiondomain.Source, error\)](<#Repository.UpsertWebhookSource>)


<a name="Repository"></a>
## type [Repository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L19-L21>)

Repository persists action sources using Postgres via GORM

```go
type Repository struct {
    // contains filtered or unexported fields
}
```

<a name="NewRepository"></a>
### func [NewRepository](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L24>)

```go
func NewRepository(db *gorm.DB) Repository
```

NewRepository constructs a Repository backed by the provided gorm handle

<a name="Repository.FindByComponentConfig"></a>
### func \(Repository\) [FindByComponentConfig](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L275>)

```go
func (r Repository) FindByComponentConfig(ctx context.Context, componentConfigID uuid.UUID) (actiondomain.Source, error)
```

FindByComponentConfig retrieves the action source associated with the component configuration

<a name="Repository.FindWebhookBindingByPath"></a>
### func \(Repository\) [FindWebhookBindingByPath](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L395>)

```go
func (r Repository) FindWebhookBindingByPath(ctx context.Context, path string) (actiondomain.WebhookBinding, error)
```

FindWebhookBindingByPath resolves a webhook source and its AREA metadata by path

<a name="Repository.ListDuePollingSources"></a>
### func \(Repository\) [ListDuePollingSources](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L297>)

```go
func (r Repository) ListDuePollingSources(ctx context.Context, before time.Time, limit int) ([]actiondomain.PollingBinding, error)
```

ListDuePollingSources returns polling action bindings whose next run is before or equal to the provided instant

<a name="Repository.ListDueScheduleSources"></a>
### func \(Repository\) [ListDueScheduleSources](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L176>)

```go
func (r Repository) ListDueScheduleSources(ctx context.Context, before time.Time, limit int) ([]actiondomain.ScheduleBinding, error)
```

ListDueScheduleSources returns scheduled action bindings whose next run is before or equal to the provided instant

<a name="Repository.UpdatePollingCursor"></a>
### func \(Repository\) [UpdatePollingCursor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L360>)

```go
func (r Repository) UpdatePollingCursor(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map[string]any) error
```

UpdatePollingCursor persists a new cursor payload for polling action sources

<a name="Repository.UpdateScheduleCursor"></a>
### func \(Repository\) [UpdateScheduleCursor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L240>)

```go
func (r Repository) UpdateScheduleCursor(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map[string]any) error
```

UpdateScheduleCursor persists a new cursor payload for the given source identifier

<a name="Repository.UpdateWebhookCursor"></a>
### func \(Repository\) [UpdateWebhookCursor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L445>)

```go
func (r Repository) UpdateWebhookCursor(ctx context.Context, sourceID uuid.UUID, componentConfigID uuid.UUID, cursor map[string]any) error
```

UpdateWebhookCursor persists auxiliary cursor metadata for webhook sources

<a name="Repository.UpsertPollingSource"></a>
### func \(Repository\) [UpsertPollingSource](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L73>)

```go
func (r Repository) UpsertPollingSource(ctx context.Context, componentConfigID uuid.UUID, cursor map[string]any) (actiondomain.Source, error)
```

UpsertPollingSource inserts or updates a polling action source for the component configuration

<a name="Repository.UpsertScheduleSource"></a>
### func \(Repository\) [UpsertScheduleSource](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L27>)

```go
func (r Repository) UpsertScheduleSource(ctx context.Context, componentConfigID uuid.UUID, schedule string, cursor map[string]any) (actiondomain.Source, error)
```

UpsertScheduleSource inserts or updates a scheduled action source for the component configuration

<a name="Repository.UpsertWebhookSource"></a>
### func \(Repository\) [UpsertWebhookSource](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/adapters/outbound/postgres/action/repository.go#L120>)

```go
func (r Repository) UpsertWebhookSource(ctx context.Context, componentConfigID uuid.UUID, secret string, urlPath string, cursor map[string]any) (actiondomain.Source, error)
```

UpsertWebhookSource inserts or updates a webhook\-driven action source for the component configuration

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
