<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# monitoring

```go
import "github.com/Epitech-2nd-Year-Projects/AREA/server/internal/app/monitoring"
```

## Index

- [type AreaSummary](<#AreaSummary>)
- [type CookieConfig](<#CookieConfig>)
- [type Handler](<#Handler>)
  - [func NewHandler\(service \*Service, sessions SessionResolver, cookies CookieConfig\) \*Handler](<#NewHandler>)
  - [func \(h \*Handler\) ListJobLogs\(c \*gin.Context\)](<#Handler.ListJobLogs>)
  - [func \(h \*Handler\) ListJobs\(c \*gin.Context\)](<#Handler.ListJobs>)
- [type JobOverview](<#JobOverview>)
- [type ListJobsOptions](<#ListJobsOptions>)
- [type ReactionSummary](<#ReactionSummary>)
- [type Service](<#Service>)
  - [func NewService\(jobs outbound.JobRepository, logs outbound.DeliveryLogRepository\) \*Service](<#NewService>)
  - [func \(s \*Service\) ListJobLogs\(ctx context.Context, userID uuid.UUID, jobID uuid.UUID, limit int\) \(\[\]jobdomain.DeliveryLog, error\)](<#Service.ListJobLogs>)
  - [func \(s \*Service\) ListJobs\(ctx context.Context, opts ListJobsOptions\) \(\[\]JobOverview, error\)](<#Service.ListJobs>)
- [type SessionResolver](<#SessionResolver>)


<a name="AreaSummary"></a>
## type [AreaSummary](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L48-L51>)

AreaSummary represents a simplified area description

```go
type AreaSummary struct {
    ID   uuid.UUID `json:"id"`
    Name string    `json:"name"`
}
```

<a name="CookieConfig"></a>
## type [CookieConfig](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/handler.go#L25-L32>)

CookieConfig mirrors the session cookie settings enforced by authentication

```go
type CookieConfig struct {
    Name     string
    Domain   string
    Path     string
    Secure   bool
    HTTPOnly bool
    SameSite http.SameSite
}
```

<a name="Handler"></a>
## type [Handler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/handler.go#L35-L39>)

Handler exposes monitoring endpoints over HTTP

```go
type Handler struct {
    // contains filtered or unexported fields
}
```

<a name="NewHandler"></a>
### func [NewHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/handler.go#L42>)

```go
func NewHandler(service *Service, sessions SessionResolver, cookies CookieConfig) *Handler
```

NewHandler constructs a monitoring handler

<a name="Handler.ListJobLogs"></a>
### func \(\*Handler\) [ListJobLogs](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/handler.go#L93>)

```go
func (h *Handler) ListJobLogs(c *gin.Context)
```

ListJobLogs handles GET /v1/monitoring/jobs/:jobId/logs

<a name="Handler.ListJobs"></a>
### func \(\*Handler\) [ListJobs](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/handler.go#L53>)

```go
func (h *Handler) ListJobs(c *gin.Context)
```

ListJobs handles GET /v1/monitoring/jobs

<a name="JobOverview"></a>
## type [JobOverview](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L34-L45>)

JobOverview presents job state along with area/component metadata

```go
type JobOverview struct {
    ID            uuid.UUID       `json:"id"`
    Status        string          `json:"status"`
    Attempt       int             `json:"attempt"`
    RunAt         time.Time       `json:"run_at"`
    CreatedAt     time.Time       `json:"created_at"`
    UpdatedAt     time.Time       `json:"updated_at"`
    Area          AreaSummary     `json:"area"`
    Reaction      ReactionSummary `json:"reaction"`
    ResultPayload map[string]any  `json:"result_payload,omitempty"`
    Error         *string         `json:"error,omitempty"`
}
```

<a name="ListJobsOptions"></a>
## type [ListJobsOptions](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L26-L31>)

ListJobsOptions defines filters accepted by ListJobs

```go
type ListJobsOptions struct {
    UserID uuid.UUID
    AreaID *uuid.UUID
    Status string
    Limit  int
}
```

<a name="ReactionSummary"></a>
## type [ReactionSummary](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L54-L57>)

ReactionSummary captures metadata about the reaction component

```go
type ReactionSummary struct {
    Component string `json:"component"`
    Provider  string `json:"provider"`
}
```

<a name="Service"></a>
## type [Service](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L15-L18>)

Service exposes monitoring queries for jobs and delivery logs

```go
type Service struct {
    // contains filtered or unexported fields
}
```

<a name="NewService"></a>
### func [NewService](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L21>)

```go
func NewService(jobs outbound.JobRepository, logs outbound.DeliveryLogRepository) *Service
```

NewService builds a monitoring service instance

<a name="Service.ListJobLogs"></a>
### func \(\*Service\) [ListJobLogs](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L111>)

```go
func (s *Service) ListJobLogs(ctx context.Context, userID uuid.UUID, jobID uuid.UUID, limit int) ([]jobdomain.DeliveryLog, error)
```

ListJobLogs returns delivery logs for the specified job ensuring ownership

<a name="Service.ListJobs"></a>
### func \(\*Service\) [ListJobs](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/service.go#L60>)

```go
func (s *Service) ListJobs(ctx context.Context, opts ListJobsOptions) ([]JobOverview, error)
```

ListJobs returns recent jobs for the authenticated user respecting filters

<a name="SessionResolver"></a>
## type [SessionResolver](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/monitoring/handler.go#L20-L22>)

SessionResolver resolves session identifiers into authenticated users

```go
type SessionResolver interface {
    ResolveSession(ctx context.Context, sessionID uuid.UUID) (userdomain.User, sessiondomain.Session, error)
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
