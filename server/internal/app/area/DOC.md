<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# area

```go
import "github.com/Epitech-2nd-Year-Projects/AREA/server/internal/app/area"
```

## Index

- [Variables](<#variables>)
- [type ActionInput](<#ActionInput>)
- [type ActionProvisioner](<#ActionProvisioner>)
- [type ActionProvisionerFunc](<#ActionProvisionerFunc>)
  - [func \(f ActionProvisionerFunc\) Provision\(ctx context.Context, area areadomain.Area\) error](<#ActionProvisionerFunc.Provision>)
- [type AreaExecutor](<#AreaExecutor>)
- [type Clock](<#Clock>)
- [type ComponentPollingHandler](<#ComponentPollingHandler>)
- [type ComponentReactionHandler](<#ComponentReactionHandler>)
- [type CompositeReactionExecutor](<#CompositeReactionExecutor>)
  - [func NewCompositeReactionExecutor\(fallback outbound.ReactionExecutor, logger \*zap.Logger, handlers ...ComponentReactionHandler\) \*CompositeReactionExecutor](<#NewCompositeReactionExecutor>)
  - [func \(c \*CompositeReactionExecutor\) ExecuteReaction\(ctx context.Context, area areadomain.Area, link areadomain.Link\) \(outbound.ReactionResult, error\)](<#CompositeReactionExecutor.ExecuteReaction>)
- [type CookieConfig](<#CookieConfig>)
- [type DuplicateOptions](<#DuplicateOptions>)
- [type ExecutionInput](<#ExecutionInput>)
- [type ExecutionOptions](<#ExecutionOptions>)
- [type ExecutionPipeline](<#ExecutionPipeline>)
  - [func NewExecutionPipeline\(repo outbound.ExecutionRepository, clock Clock, producer queueport.JobProducer\) ExecutionPipeline](<#NewExecutionPipeline>)
- [type HTTPPollingHandler](<#HTTPPollingHandler>)
  - [func NewHTTPPollingHandler\(client \*http.Client, logger \*zap.Logger, identities identityport.Repository, providers oauthProviderResolver\) \*HTTPPollingHandler](<#NewHTTPPollingHandler>)
  - [func \(h \*HTTPPollingHandler\) Poll\(ctx context.Context, req PollingRequest\) \(PollingResult, error\)](<#HTTPPollingHandler.Poll>)
  - [func \(h \*HTTPPollingHandler\) Supports\(component \*componentdomain.Component\) bool](<#HTTPPollingHandler.Supports>)
- [type Handler](<#Handler>)
  - [func NewHandler\(service \*Service, sessions SessionResolver, cookies CookieConfig, jobs outbound.JobRepository\) \*Handler](<#NewHandler>)
  - [func \(h \*Handler\) CreateArea\(c \*gin.Context\)](<#Handler.CreateArea>)
  - [func \(h \*Handler\) DeleteArea\(c \*gin.Context, areaID openapitypes.UUID\)](<#Handler.DeleteArea>)
  - [func \(h \*Handler\) DuplicateArea\(c \*gin.Context, areaID openapitypes.UUID\)](<#Handler.DuplicateArea>)
  - [func \(h \*Handler\) ExecuteArea\(c \*gin.Context, areaID openapitypes.UUID\)](<#Handler.ExecuteArea>)
  - [func \(h \*Handler\) GetArea\(c \*gin.Context, areaID openapitypes.UUID\)](<#Handler.GetArea>)
  - [func \(h \*Handler\) ListAreaHistory\(c \*gin.Context, areaID openapitypes.UUID, params openapi.ListAreaHistoryParams\)](<#Handler.ListAreaHistory>)
  - [func \(h \*Handler\) ListAreas\(c \*gin.Context\)](<#Handler.ListAreas>)
  - [func \(h \*Handler\) UpdateArea\(c \*gin.Context, areaID openapitypes.UUID\)](<#Handler.UpdateArea>)
  - [func \(h \*Handler\) UpdateAreaStatus\(c \*gin.Context, areaID openapitypes.UUID\)](<#Handler.UpdateAreaStatus>)
- [type NoopProvisioner](<#NoopProvisioner>)
  - [func \(NoopProvisioner\) Provision\(ctx context.Context, area areadomain.Area\) error](<#NoopProvisioner.Provision>)
- [type PathGenerator](<#PathGenerator>)
- [type PollingEvent](<#PollingEvent>)
- [type PollingProvisioner](<#PollingProvisioner>)
  - [func NewPollingProvisioner\(sources outbound.ActionSourceRepository, clock Clock\) \*PollingProvisioner](<#NewPollingProvisioner>)
  - [func \(p \*PollingProvisioner\) Provision\(ctx context.Context, area areadomain.Area\) error](<#PollingProvisioner.Provision>)
- [type PollingRequest](<#PollingRequest>)
- [type PollingResult](<#PollingResult>)
- [type PollingRunner](<#PollingRunner>)
  - [func NewPollingRunner\(sources outbound.ActionSourceRepository, components outbound.ComponentRepository, executor AreaExecutor, clock Clock, handlers \[\]ComponentPollingHandler, opts ...PollingRunnerOption\) \*PollingRunner](<#NewPollingRunner>)
  - [func \(r \*PollingRunner\) Run\(ctx context.Context\)](<#PollingRunner.Run>)
- [type PollingRunnerOption](<#PollingRunnerOption>)
  - [func WithPollingBatchSize\(size int\) PollingRunnerOption](<#WithPollingBatchSize>)
  - [func WithPollingInterval\(interval time.Duration\) PollingRunnerOption](<#WithPollingInterval>)
  - [func WithPollingLogger\(logger \*zap.Logger\) PollingRunnerOption](<#WithPollingLogger>)
- [type ReactionInput](<#ReactionInput>)
- [type RegistryOption](<#RegistryOption>)
  - [func WithProvisionerFallback\(p ActionProvisioner\) RegistryOption](<#WithProvisionerFallback>)
- [type RegistryProvisioner](<#RegistryProvisioner>)
  - [func NewRegistryProvisioner\(opts ...RegistryOption\) \*RegistryProvisioner](<#NewRegistryProvisioner>)
  - [func \(r \*RegistryProvisioner\) Provision\(ctx context.Context, area areadomain.Area\) error](<#RegistryProvisioner.Provision>)
  - [func \(r \*RegistryProvisioner\) Register\(provider string, component string, provisioner ActionProvisioner\)](<#RegistryProvisioner.Register>)
- [type SecretGenerator](<#SecretGenerator>)
- [type Service](<#Service>)
  - [func NewService\(repo outbound.AreaRepository, components outbound.ComponentRepository, subscriptions outbound.SubscriptionRepository, sources outbound.ActionSourceRepository, pipeline ExecutionPipeline, clock Clock, provisioner ActionProvisioner\) \*Service](<#NewService>)
  - [func \(s \*Service\) Create\(ctx context.Context, userID uuid.UUID, name string, description string, action ActionInput, reactions \[\]ReactionInput\) \(areadomain.Area, error\)](<#Service.Create>)
  - [func \(s \*Service\) Delete\(ctx context.Context, userID uuid.UUID, areaID uuid.UUID\) error](<#Service.Delete>)
  - [func \(s \*Service\) Duplicate\(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, opts DuplicateOptions\) \(areadomain.Area, error\)](<#Service.Duplicate>)
  - [func \(s \*Service\) Execute\(ctx context.Context, userID uuid.UUID, areaID uuid.UUID\) error](<#Service.Execute>)
  - [func \(s \*Service\) ExecuteWithOptions\(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, opts ExecutionOptions\) error](<#Service.ExecuteWithOptions>)
  - [func \(s \*Service\) Get\(ctx context.Context, userID uuid.UUID, areaID uuid.UUID\) \(areadomain.Area, error\)](<#Service.Get>)
  - [func \(s \*Service\) List\(ctx context.Context, userID uuid.UUID\) \(\[\]areadomain.Area, error\)](<#Service.List>)
  - [func \(s \*Service\) ProcessWebhook\(ctx context.Context, path string, secret string, payload map\[string\]any, fingerprint string, occurredAt time.Time\) error](<#Service.ProcessWebhook>)
  - [func \(s \*Service\) Update\(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, cmd UpdateAreaCommand\) \(areadomain.Area, error\)](<#Service.Update>)
  - [func \(s \*Service\) UpdateStatus\(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, status areadomain.Status\) \(areadomain.Area, error\)](<#Service.UpdateStatus>)
- [type SessionResolver](<#SessionResolver>)
- [type TimerProvisioner](<#TimerProvisioner>)
  - [func NewTimerProvisioner\(sources outbound.ActionSourceRepository, clock Clock\) \*TimerProvisioner](<#NewTimerProvisioner>)
  - [func \(p \*TimerProvisioner\) Provision\(ctx context.Context, area areadomain.Area\) error](<#TimerProvisioner.Provision>)
- [type TimerScheduler](<#TimerScheduler>)
  - [func NewTimerScheduler\(sources outbound.ActionSourceRepository, executor AreaExecutor, clock Clock, opts ...TimerSchedulerOption\) \*TimerScheduler](<#NewTimerScheduler>)
  - [func \(s \*TimerScheduler\) Run\(ctx context.Context\)](<#TimerScheduler.Run>)
- [type TimerSchedulerOption](<#TimerSchedulerOption>)
  - [func WithTimerBatchSize\(size int\) TimerSchedulerOption](<#WithTimerBatchSize>)
  - [func WithTimerInterval\(interval time.Duration\) TimerSchedulerOption](<#WithTimerInterval>)
  - [func WithTimerLogger\(logger \*zap.Logger\) TimerSchedulerOption](<#WithTimerLogger>)
- [type UpdateActionCommand](<#UpdateActionCommand>)
- [type UpdateAreaCommand](<#UpdateAreaCommand>)
- [type UpdateReactionCommand](<#UpdateReactionCommand>)
- [type WebhookHandler](<#WebhookHandler>)
  - [func NewWebhookHandler\(service \*Service, logger \*zap.Logger\) \*WebhookHandler](<#NewWebhookHandler>)
  - [func \(h \*WebhookHandler\) Handle\(c \*gin.Context\)](<#WebhookHandler.Handle>)
- [type WebhookProvisioner](<#WebhookProvisioner>)
  - [func NewWebhookProvisioner\(sources outbound.ActionSourceRepository, secretGen SecretGenerator, pathGen PathGenerator, clock Clock\) \*WebhookProvisioner](<#NewWebhookProvisioner>)
  - [func \(p \*WebhookProvisioner\) Provision\(ctx context.Context, area areadomain.Area\) error](<#WebhookProvisioner.Provision>)


## Variables

<a name="ErrNameRequired"></a>Validation errors returned by the service

```go
var (
    ErrNameRequired                = errors.New("area: name required")
    ErrNameTooLong                 = errors.New("area: name exceeds limit")
    ErrDescriptionTooLong          = errors.New("area: description exceeds limit")
    ErrActionComponentRequired     = errors.New("area: action component required")
    ErrActionComponentInvalid      = errors.New("area: action component invalid")
    ErrActionComponentDisabled     = errors.New("area: action component disabled")
    ErrReactionsRequired           = errors.New("area: at least one reaction required")
    ErrReactionComponentInvalid    = errors.New("area: reaction component invalid")
    ErrReactionComponentDisabled   = errors.New("area: reaction component disabled")
    ErrAreaNotOwned                = errors.New("area: not owner")
    ErrAreaMisconfigured           = errors.New("area: misconfigured")
    ErrProviderSubscriptionMissing = errors.New("area: provider subscription missing")
    ErrComponentParamsInvalid      = errors.New("area: component params invalid")
    ErrWebhookNotFound             = errors.New("area: webhook source not found")
    ErrWebhookSecretMissing        = errors.New("area: webhook secret missing")
    ErrWebhookSecretInvalid        = errors.New("area: webhook secret invalid")
    ErrAreaUpdateNoChanges         = errors.New("area: no changes detected")
    ErrAreaConfigNotFound          = errors.New("area: component config not found")
    ErrAreaStatusInvalid           = errors.New("area: invalid status")
)
```

<a name="ActionInput"></a>
## type [ActionInput](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L91-L95>)

ActionInput carries action configuration used when creating an AREA

```go
type ActionInput struct {
    ComponentID uuid.UUID
    Name        string
    Params      map[string]any
}
```

<a name="ActionProvisioner"></a>
## type [ActionProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L70-L72>)

ActionProvisioner configures action\-specific infrastructure once an AREA is stored

```go
type ActionProvisioner interface {
    Provision(ctx context.Context, area areadomain.Area) error
}
```

<a name="ActionProvisionerFunc"></a>
## type [ActionProvisionerFunc](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L11>)

ActionProvisionerFunc adapts ordinary functions to the ActionProvisioner interface

```go
type ActionProvisionerFunc func(ctx context.Context, area areadomain.Area) error
```

<a name="ActionProvisionerFunc.Provision"></a>
### func \(ActionProvisionerFunc\) [Provision](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L14>)

```go
func (f ActionProvisionerFunc) Provision(ctx context.Context, area areadomain.Area) error
```

Provision executes the wrapped function if non\-nil

<a name="AreaExecutor"></a>
## type [AreaExecutor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L14-L16>)

AreaExecutor represents the subset of Service required by the scheduler

```go
type AreaExecutor interface {
    ExecuteWithOptions(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, opts ExecutionOptions) error
}
```

<a name="Clock"></a>
## type [Clock](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L22-L24>)

Clock abstracts time for deterministic testing

```go
type Clock interface {
    Now() time.Time
}
```

<a name="ComponentPollingHandler"></a>
## type [ComponentPollingHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L40-L43>)

ComponentPollingHandler fetches events for polling\-based action components

```go
type ComponentPollingHandler interface {
    Supports(component *componentdomain.Component) bool
    Poll(ctx context.Context, req PollingRequest) (PollingResult, error)
}
```

<a name="ComponentReactionHandler"></a>
## type [ComponentReactionHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/reaction_executor.go#L14-L17>)

ComponentReactionHandler dispatches reactions for specific components

```go
type ComponentReactionHandler interface {
    Supports(component *componentdomain.Component) bool
    Execute(ctx context.Context, area areadomain.Area, link areadomain.Link) (outbound.ReactionResult, error)
}
```

<a name="CompositeReactionExecutor"></a>
## type [CompositeReactionExecutor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/reaction_executor.go#L20-L24>)

CompositeReactionExecutor routes reaction execution across component\-specific handlers

```go
type CompositeReactionExecutor struct {
    // contains filtered or unexported fields
}
```

<a name="NewCompositeReactionExecutor"></a>
### func [NewCompositeReactionExecutor](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/reaction_executor.go#L27>)

```go
func NewCompositeReactionExecutor(fallback outbound.ReactionExecutor, logger *zap.Logger, handlers ...ComponentReactionHandler) *CompositeReactionExecutor
```

NewCompositeReactionExecutor assembles a composite executor

<a name="CompositeReactionExecutor.ExecuteReaction"></a>
### func \(\*CompositeReactionExecutor\) [ExecuteReaction](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/reaction_executor.go#L35>)

```go
func (c *CompositeReactionExecutor) ExecuteReaction(ctx context.Context, area areadomain.Area, link areadomain.Link) (outbound.ReactionResult, error)
```

ExecuteReaction dispatches the reaction to the first supporting handler or fallback

<a name="CookieConfig"></a>
## type [CookieConfig](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L28-L35>)

CookieConfig replicates the session cookie directives enforced at the edge

```go
type CookieConfig struct {
    Name     string
    Domain   string
    Path     string
    Secure   bool
    HTTPOnly bool
    SameSite http.SameSite
}
```

<a name="DuplicateOptions"></a>
## type [DuplicateOptions](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L132-L135>)

DuplicateOptions customises the duplication of an existing automation

```go
type DuplicateOptions struct {
    Name        *string
    Description *string
}
```

<a name="ExecutionInput"></a>
## type [ExecutionInput](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/pipeline.go#L18-L24>)

ExecutionInput aggregates the data required to enqueue jobs for an AREA

```go
type ExecutionInput struct {
    Area        areadomain.Area
    SourceID    uuid.UUID
    Payload     map[string]any
    Fingerprint string
    OccurredAt  time.Time
}
```

<a name="ExecutionOptions"></a>
## type [ExecutionOptions](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L138-L143>)

ExecutionOptions control how an AREA execution is enqueued

```go
type ExecutionOptions struct {
    SourceID    uuid.UUID
    Payload     map[string]any
    Fingerprint string
    OccurredAt  time.Time
}
```

<a name="ExecutionPipeline"></a>
## type [ExecutionPipeline](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/pipeline.go#L27-L29>)

ExecutionPipeline persists action events, triggers, and jobs

```go
type ExecutionPipeline interface {
    Enqueue(ctx context.Context, input ExecutionInput) error
}
```

<a name="NewExecutionPipeline"></a>
### func [NewExecutionPipeline](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/pipeline.go#L38>)

```go
func NewExecutionPipeline(repo outbound.ExecutionRepository, clock Clock, producer queueport.JobProducer) ExecutionPipeline
```

NewExecutionPipeline builds a pipeline backed by the provided execution repository

<a name="HTTPPollingHandler"></a>
## type [HTTPPollingHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/http_polling_handler.go#L32-L37>)

HTTPPollingHandler polls HTTP endpoints defined in component metadata to produce action events

```go
type HTTPPollingHandler struct {
    // contains filtered or unexported fields
}
```

<a name="NewHTTPPollingHandler"></a>
### func [NewHTTPPollingHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/http_polling_handler.go#L44>)

```go
func NewHTTPPollingHandler(client *http.Client, logger *zap.Logger, identities identityport.Repository, providers oauthProviderResolver) *HTTPPollingHandler
```

NewHTTPPollingHandler assembles an HTTP polling handler

<a name="HTTPPollingHandler.Poll"></a>
### func \(\*HTTPPollingHandler\) [Poll](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/http_polling_handler.go#L66>)

```go
func (h *HTTPPollingHandler) Poll(ctx context.Context, req PollingRequest) (PollingResult, error)
```

Poll executes the HTTP polling flow for supported components

<a name="HTTPPollingHandler.Supports"></a>
### func \(\*HTTPPollingHandler\) [Supports](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/http_polling_handler.go#L60>)

```go
func (h *HTTPPollingHandler) Supports(component *componentdomain.Component) bool
```

Supports reports whether the component declares a compatible HTTP polling ingestion

<a name="Handler"></a>
## type [Handler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L43-L48>)

Handler exposes HTTP endpoints matching the area OpenAPI contract

```go
type Handler struct {
    // contains filtered or unexported fields
}
```

<a name="NewHandler"></a>
### func [NewHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L51>)

```go
func NewHandler(service *Service, sessions SessionResolver, cookies CookieConfig, jobs outbound.JobRepository) *Handler
```

NewHandler assembles an area HTTP handler

<a name="Handler.CreateArea"></a>
### func \(\*Handler\) [CreateArea](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L79>)

```go
func (h *Handler) CreateArea(c *gin.Context)
```

CreateArea handles POST /v1/areas

<a name="Handler.DeleteArea"></a>
### func \(\*Handler\) [DeleteArea](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L280>)

```go
func (h *Handler) DeleteArea(c *gin.Context, areaID openapitypes.UUID)
```

DeleteArea handles DELETE /v1/areas/\{areaId\}

<a name="Handler.DuplicateArea"></a>
### func \(\*Handler\) [DuplicateArea](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L189>)

```go
func (h *Handler) DuplicateArea(c *gin.Context, areaID openapitypes.UUID)
```

DuplicateArea handles POST /v1/areas/\{areaId\}/duplicate

<a name="Handler.ExecuteArea"></a>
### func \(\*Handler\) [ExecuteArea](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L265>)

```go
func (h *Handler) ExecuteArea(c *gin.Context, areaID openapitypes.UUID)
```

ExecuteArea handles POST /v1/areas/\{areaId\}/execute

<a name="Handler.GetArea"></a>
### func \(\*Handler\) [GetArea](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L119>)

```go
func (h *Handler) GetArea(c *gin.Context, areaID openapitypes.UUID)
```

GetArea handles GET /v1/areas/\{areaId\}

<a name="Handler.ListAreaHistory"></a>
### func \(\*Handler\) [ListAreaHistory](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L224>)

```go
func (h *Handler) ListAreaHistory(c *gin.Context, areaID openapitypes.UUID, params openapi.ListAreaHistoryParams)
```

ListAreaHistory handles GET /v1/areas/\{areaId\}/history

<a name="Handler.ListAreas"></a>
### func \(\*Handler\) [ListAreas](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L62>)

```go
func (h *Handler) ListAreas(c *gin.Context)
```

ListAreas handles GET /v1/areas

<a name="Handler.UpdateArea"></a>
### func \(\*Handler\) [UpdateArea](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L135>)

```go
func (h *Handler) UpdateArea(c *gin.Context, areaID openapitypes.UUID)
```

UpdateArea handles PATCH /v1/areas/\{areaId\}

<a name="Handler.UpdateAreaStatus"></a>
### func \(\*Handler\) [UpdateAreaStatus](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L167>)

```go
func (h *Handler) UpdateAreaStatus(c *gin.Context, areaID openapitypes.UUID)
```

UpdateAreaStatus handles PATCH /v1/areas/\{areaId\}/status

<a name="NoopProvisioner"></a>
## type [NoopProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L22>)

NoopProvisioner implements ActionProvisioner but performs no work

```go
type NoopProvisioner struct{}
```

<a name="NoopProvisioner.Provision"></a>
### func \(NoopProvisioner\) [Provision](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L25>)

```go
func (NoopProvisioner) Provision(ctx context.Context, area areadomain.Area) error
```

Provision satisfies the ActionProvisioner contract without side effects

<a name="PathGenerator"></a>
## type [PathGenerator](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_provisioner.go#L23>)

PathGenerator returns the webhook URL path segment used to route events

```go
type PathGenerator func(area areadomain.Area) (string, error)
```

<a name="PollingEvent"></a>
## type [PollingEvent](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L18-L22>)

PollingEvent captures an event emitted by a polling action

```go
type PollingEvent struct {
    Payload     map[string]any
    Fingerprint string
    OccurredAt  time.Time
}
```

<a name="PollingProvisioner"></a>
## type [PollingProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_provisioner.go#L18-L21>)

PollingProvisioner provisions polling metadata for action sources that rely on periodic fetches

```go
type PollingProvisioner struct {
    // contains filtered or unexported fields
}
```

<a name="NewPollingProvisioner"></a>
### func [NewPollingProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_provisioner.go#L24>)

```go
func NewPollingProvisioner(sources outbound.ActionSourceRepository, clock Clock) *PollingProvisioner
```

NewPollingProvisioner constructs a PollingProvisioner bound to the provided repositories

<a name="PollingProvisioner.Provision"></a>
### func \(\*PollingProvisioner\) [Provision](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_provisioner.go#L29>)

```go
func (p *PollingProvisioner) Provision(ctx context.Context, area areadomain.Area) error
```

Provision ensures polling sources are configured when the action metadata declares a polling ingestion mode

<a name="PollingRequest"></a>
## type [PollingRequest](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L31-L37>)

PollingRequest provides context to component\-specific polling handlers

```go
type PollingRequest struct {
    Binding   actiondomain.PollingBinding
    Component componentdomain.Component
    Cursor    map[string]any
    Now       time.Time
    Identity  map[string]any
}
```

<a name="PollingResult"></a>
## type [PollingResult](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L25-L28>)

PollingResult groups the events produced by a polling cycle and the updated cursor state

```go
type PollingResult struct {
    Cursor map[string]any
    Events []PollingEvent
}
```

<a name="PollingRunner"></a>
## type [PollingRunner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L46-L55>)

PollingRunner orchestrates polling action execution and event creation

```go
type PollingRunner struct {
    // contains filtered or unexported fields
}
```

<a name="NewPollingRunner"></a>
### func [NewPollingRunner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L88-L95>)

```go
func NewPollingRunner(sources outbound.ActionSourceRepository, components outbound.ComponentRepository, executor AreaExecutor, clock Clock, handlers []ComponentPollingHandler, opts ...PollingRunnerOption) *PollingRunner
```

NewPollingRunner assembles a polling runner from its dependencies

<a name="PollingRunner.Run"></a>
### func \(\*PollingRunner\) [Run](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L130>)

```go
func (r *PollingRunner) Run(ctx context.Context)
```

Run starts the polling loop until the context is cancelled

<a name="PollingRunnerOption"></a>
## type [PollingRunnerOption](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L58>)

PollingRunnerOption configures the polling runner behaviour

```go
type PollingRunnerOption func(*PollingRunner)
```

<a name="WithPollingBatchSize"></a>
### func [WithPollingBatchSize](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L70>)

```go
func WithPollingBatchSize(size int) PollingRunnerOption
```

WithPollingBatchSize overrides the maximum number of polling sources processed per tick

<a name="WithPollingInterval"></a>
### func [WithPollingInterval](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L61>)

```go
func WithPollingInterval(interval time.Duration) PollingRunnerOption
```

WithPollingInterval overrides the runner loop interval

<a name="WithPollingLogger"></a>
### func [WithPollingLogger](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/polling_runner.go#L79>)

```go
func WithPollingLogger(logger *zap.Logger) PollingRunnerOption
```

WithPollingLogger sets the logger used by the runner

<a name="ReactionInput"></a>
## type [ReactionInput](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L98-L102>)

ReactionInput carries reaction configuration used when creating an AREA

```go
type ReactionInput struct {
    ComponentID uuid.UUID
    Name        string
    Params      map[string]any
}
```

<a name="RegistryOption"></a>
## type [RegistryOption](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L41>)

RegistryOption configures a RegistryProvisioner instance

```go
type RegistryOption func(*RegistryProvisioner)
```

<a name="WithProvisionerFallback"></a>
### func [WithProvisionerFallback](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L44>)

```go
func WithProvisionerFallback(p ActionProvisioner) RegistryOption
```

WithProvisionerFallback sets the fallback ActionProvisioner used when no specific handler matches

<a name="RegistryProvisioner"></a>
## type [RegistryProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L35-L38>)

RegistryProvisioner routes provisioning to registered handlers based on the action metadata

```go
type RegistryProvisioner struct {
    // contains filtered or unexported fields
}
```

<a name="NewRegistryProvisioner"></a>
### func [NewRegistryProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L51>)

```go
func NewRegistryProvisioner(opts ...RegistryOption) *RegistryProvisioner
```

NewRegistryProvisioner builds a registry\-backed ActionProvisioner

<a name="RegistryProvisioner.Provision"></a>
### func \(\*RegistryProvisioner\) [Provision](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L76>)

```go
func (r *RegistryProvisioner) Provision(ctx context.Context, area areadomain.Area) error
```

Provision dispatches to the matching registered provisioner or the configured fallback

<a name="RegistryProvisioner.Register"></a>
### func \(\*RegistryProvisioner\) [Register](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/action_provisioner.go#L64>)

```go
func (r *RegistryProvisioner) Register(provider string, component string, provisioner ActionProvisioner)
```

Register associates the given ActionProvisioner with the supplied provider/component identifiers

<a name="SecretGenerator"></a>
## type [SecretGenerator](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_provisioner.go#L20>)

SecretGenerator returns a secret string to authenticate webhook payloads

```go
type SecretGenerator func() (string, error)
```

<a name="Service"></a>
## type [Service](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L31-L39>)

Service orchestrates creation and retrieval of AREA automations

```go
type Service struct {
    // contains filtered or unexported fields
}
```

<a name="NewService"></a>
### func [NewService](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L75>)

```go
func NewService(repo outbound.AreaRepository, components outbound.ComponentRepository, subscriptions outbound.SubscriptionRepository, sources outbound.ActionSourceRepository, pipeline ExecutionPipeline, clock Clock, provisioner ActionProvisioner) *Service
```

NewService builds a Service bound to the provided repository

<a name="Service.Create"></a>
### func \(\*Service\) [Create](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L146>)

```go
func (s *Service) Create(ctx context.Context, userID uuid.UUID, name string, description string, action ActionInput, reactions []ReactionInput) (areadomain.Area, error)
```

Create registers a new automation owned by the given user

<a name="Service.Delete"></a>
### func \(\*Service\) [Delete](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L762>)

```go
func (s *Service) Delete(ctx context.Context, userID uuid.UUID, areaID uuid.UUID) error
```

Delete removes an automation owned by the given user

<a name="Service.Duplicate"></a>
### func \(\*Service\) [Duplicate](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L684>)

```go
func (s *Service) Duplicate(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, opts DuplicateOptions) (areadomain.Area, error)
```

Duplicate clones an existing automation and persists it for the same user

<a name="Service.Execute"></a>
### func \(\*Service\) [Execute](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L319>)

```go
func (s *Service) Execute(ctx context.Context, userID uuid.UUID, areaID uuid.UUID) error
```

Execute enqueues jobs for the specified area owned by the user

<a name="Service.ExecuteWithOptions"></a>
### func \(\*Service\) [ExecuteWithOptions](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L324>)

```go
func (s *Service) ExecuteWithOptions(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, opts ExecutionOptions) error
```

ExecuteWithOptions enqueues jobs for the specified area, allowing source overrides

<a name="Service.Get"></a>
### func \(\*Service\) [Get](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L455>)

```go
func (s *Service) Get(ctx context.Context, userID uuid.UUID, areaID uuid.UUID) (areadomain.Area, error)
```

Get returns a single area by identifier ensuring ownership

<a name="Service.List"></a>
### func \(\*Service\) [List](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L443>)

```go
func (s *Service) List(ctx context.Context, userID uuid.UUID) ([]areadomain.Area, error)
```

List fetches all areas owned by the given user

<a name="Service.ProcessWebhook"></a>
### func \(\*Service\) [ProcessWebhook](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L379>)

```go
func (s *Service) ProcessWebhook(ctx context.Context, path string, secret string, payload map[string]any, fingerprint string, occurredAt time.Time) error
```

ProcessWebhook ingests a webhook event for the specified path and secret

<a name="Service.Update"></a>
### func \(\*Service\) [Update](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L477>)

```go
func (s *Service) Update(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, cmd UpdateAreaCommand) (areadomain.Area, error)
```

Update applies partial modifications to an automation ensuring ownership

<a name="Service.UpdateStatus"></a>
### func \(\*Service\) [UpdateStatus](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L655>)

```go
func (s *Service) UpdateStatus(ctx context.Context, userID uuid.UUID, areaID uuid.UUID, status areadomain.Status) (areadomain.Area, error)
```

UpdateStatus toggles the lifecycle status of an automation

<a name="SessionResolver"></a>
## type [SessionResolver](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/handler.go#L38-L40>)

SessionResolver resolves a session identifier into the authenticated user

```go
type SessionResolver interface {
    ResolveSession(ctx context.Context, sessionID uuid.UUID) (userdomain.User, sessiondomain.Session, error)
}
```

<a name="TimerProvisioner"></a>
## type [TimerProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_provisioner.go#L13-L16>)

TimerProvisioner provisions schedule sources for timer\-based actions

```go
type TimerProvisioner struct {
    // contains filtered or unexported fields
}
```

<a name="NewTimerProvisioner"></a>
### func [NewTimerProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_provisioner.go#L19>)

```go
func NewTimerProvisioner(sources outbound.ActionSourceRepository, clock Clock) *TimerProvisioner
```

NewTimerProvisioner constructs a TimerProvisioner from its dependencies

<a name="TimerProvisioner.Provision"></a>
### func \(\*TimerProvisioner\) [Provision](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_provisioner.go#L24>)

```go
func (p *TimerProvisioner) Provision(ctx context.Context, area areadomain.Area) error
```

Provision configures the timer schedule when the AREA action uses the timer component

<a name="TimerScheduler"></a>
## type [TimerScheduler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L19-L26>)

TimerScheduler polls scheduled actions and triggers the associated areas

```go
type TimerScheduler struct {
    // contains filtered or unexported fields
}
```

<a name="NewTimerScheduler"></a>
### func [NewTimerScheduler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L59>)

```go
func NewTimerScheduler(sources outbound.ActionSourceRepository, executor AreaExecutor, clock Clock, opts ...TimerSchedulerOption) *TimerScheduler
```

NewTimerScheduler assembles a scheduler for timer\-based actions

<a name="TimerScheduler.Run"></a>
### func \(\*TimerScheduler\) [Run](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L86>)

```go
func (s *TimerScheduler) Run(ctx context.Context)
```

Run starts the scheduler loop until the context is cancelled

<a name="TimerSchedulerOption"></a>
## type [TimerSchedulerOption](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L29>)

TimerSchedulerOption configures scheduler behavior

```go
type TimerSchedulerOption func(*TimerScheduler)
```

<a name="WithTimerBatchSize"></a>
### func [WithTimerBatchSize](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L41>)

```go
func WithTimerBatchSize(size int) TimerSchedulerOption
```

WithTimerBatchSize overrides the maximum number of schedules processed per tick

<a name="WithTimerInterval"></a>
### func [WithTimerInterval](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L32>)

```go
func WithTimerInterval(interval time.Duration) TimerSchedulerOption
```

WithTimerInterval overrides the polling interval

<a name="WithTimerLogger"></a>
### func [WithTimerLogger](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/timer_scheduler.go#L50>)

```go
func WithTimerLogger(logger *zap.Logger) TimerSchedulerOption
```

WithTimerLogger sets the logger used by the scheduler

<a name="UpdateActionCommand"></a>
## type [UpdateActionCommand](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L114-L120>)

UpdateActionCommand encapsulates updates applied to the action configuration

```go
type UpdateActionCommand struct {
    ConfigID  uuid.UUID
    Name      *string
    NameSet   bool
    Params    map[string]any
    ParamsSet bool
}
```

<a name="UpdateAreaCommand"></a>
## type [UpdateAreaCommand](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L105-L111>)

UpdateAreaCommand carries optional fields that can be patched on an automation

```go
type UpdateAreaCommand struct {
    Name           *string
    Description    *string
    DescriptionSet bool
    Action         *UpdateActionCommand
    Reactions      []UpdateReactionCommand
}
```

<a name="UpdateReactionCommand"></a>
## type [UpdateReactionCommand](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/service.go#L123-L129>)

UpdateReactionCommand encapsulates updates applied to a reaction configuration

```go
type UpdateReactionCommand struct {
    ConfigID  uuid.UUID
    Name      *string
    NameSet   bool
    Params    map[string]any
    ParamsSet bool
}
```

<a name="WebhookHandler"></a>
## type [WebhookHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_handler.go#L23-L26>)

WebhookHandler ingests webhook HTTP requests and delegates them to the area service

```go
type WebhookHandler struct {
    // contains filtered or unexported fields
}
```

<a name="NewWebhookHandler"></a>
### func [NewWebhookHandler](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_handler.go#L29>)

```go
func NewWebhookHandler(service *Service, logger *zap.Logger) *WebhookHandler
```

NewWebhookHandler constructs a webhook handler backed by the provided service

<a name="WebhookHandler.Handle"></a>
### func \(\*WebhookHandler\) [Handle](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_handler.go#L37>)

```go
func (h *WebhookHandler) Handle(c *gin.Context)
```

Handle processes POST /hooks/\*path requests

<a name="WebhookProvisioner"></a>
## type [WebhookProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_provisioner.go#L26-L31>)

WebhookProvisioner provisions webhook action sources with deterministic routing metadata

```go
type WebhookProvisioner struct {
    // contains filtered or unexported fields
}
```

<a name="NewWebhookProvisioner"></a>
### func [NewWebhookProvisioner](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_provisioner.go#L34>)

```go
func NewWebhookProvisioner(sources outbound.ActionSourceRepository, secretGen SecretGenerator, pathGen PathGenerator, clock Clock) *WebhookProvisioner
```

NewWebhookProvisioner constructs a WebhookProvisioner with optional generators

<a name="WebhookProvisioner.Provision"></a>
### func \(\*WebhookProvisioner\) [Provision](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/area/webhook_provisioner.go#L45>)

```go
func (p *WebhookProvisioner) Provision(ctx context.Context, area areadomain.Area) error
```

Provision materialises webhook metadata when the action declares a webhook ingestion mode

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
