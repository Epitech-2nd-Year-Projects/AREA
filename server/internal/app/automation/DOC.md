<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# automation

```go
import "github.com/Epitech-2nd-Year-Projects/AREA/server/internal/app/automation"
```

## Index

- [type Clock](<#Clock>)
- [type Option](<#Option>)
  - [func WithBackoff\(delay time.Duration\) Option](<#WithBackoff>)
  - [func WithClock\(clock Clock\) Option](<#WithClock>)
  - [func WithID\(id string\) Option](<#WithID>)
  - [func WithPollTimeout\(timeout time.Duration\) Option](<#WithPollTimeout>)
- [type Worker](<#Worker>)
  - [func NewWorker\(queue queueport.JobQueue, jobs outbound.JobRepository, logs outbound.DeliveryLogRepository, areas \*area.Service, executor \*area.CompositeReactionExecutor, logger \*zap.Logger, opts ...Option\) \*Worker](<#NewWorker>)
  - [func \(w \*Worker\) Run\(ctx context.Context\)](<#Worker.Run>)


<a name="Clock"></a>
## type [Clock](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L21-L23>)

Clock abstracts time for deterministic testing

```go
type Clock interface {
    Now() time.Time
}
```

<a name="Option"></a>
## type [Option](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L44>)

Option configures worker behavior

```go
type Option func(*Worker)
```

<a name="WithBackoff"></a>
### func [WithBackoff](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L65>)

```go
func WithBackoff(delay time.Duration) Option
```

WithBackoff sets the delay used after transient errors

<a name="WithClock"></a>
### func [WithClock](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L74>)

```go
func WithClock(clock Clock) Option
```

WithClock injects a deterministic clock \(useful for tests\)

<a name="WithID"></a>
### func [WithID](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L47>)

```go
func WithID(id string) Option
```

WithID overrides the worker identifier used for locking

<a name="WithPollTimeout"></a>
### func [WithPollTimeout](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L56>)

```go
func WithPollTimeout(timeout time.Duration) Option
```

WithPollTimeout sets the blocking reserve timeout

<a name="Worker"></a>
## type [Worker](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L30-L41>)

Worker processes jobs fetched from the queue and executes their reactions

```go
type Worker struct {
    // contains filtered or unexported fields
}
```

<a name="NewWorker"></a>
### func [NewWorker](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L83>)

```go
func NewWorker(queue queueport.JobQueue, jobs outbound.JobRepository, logs outbound.DeliveryLogRepository, areas *area.Service, executor *area.CompositeReactionExecutor, logger *zap.Logger, opts ...Option) *Worker
```

NewWorker assembles a job worker from its dependencies

<a name="Worker.Run"></a>
### func \(\*Worker\) [Run](<https://github.com/Epitech-2nd-Year-Projects/AREA/blob/main/server/internal/app/automation/worker.go#L109>)

```go
func (w *Worker) Run(ctx context.Context)
```

Run starts the worker loop until the context is cancelled

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
